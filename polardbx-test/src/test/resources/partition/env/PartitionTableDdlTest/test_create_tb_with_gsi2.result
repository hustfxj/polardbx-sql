DROP TABLE IF EXISTS t1;
DROP TABLE IF EXISTS t2;
DROP TABLE IF EXISTS t3;
CREATE TABLE t1 (
	a int,
	b int,
	c int,
	UNIQUE GLOBAL INDEX ugsi1 (a) PARTITION BY KEY (a)
)
PARTITION BY KEY (a);
CREATE TABLE t2 (
	a int,
	b int,
	c int,
	GLOBAL INDEX ugsi2(a) PARTITION BY KEY (a)
)
PARTITION BY KEY (a);
CREATE TABLE t3 (
	a int,
	b int,
	c int,
	UNIQUE INDEX idx3 (a)
)
PARTITION BY KEY (a);
SHOW CREATE TABLE t1;
Table,Create Table
t1,CREATE TABLE `t1` (
	`a` int(11) DEFAULT NULL,
	`b` int(11) DEFAULT NULL,
	`c` int(11) DEFAULT NULL,
	UNIQUE GLOBAL INDEX `ugsi1` (`a`)
		PARTITION BY KEY(`a`)
		PARTITIONS 3,
	KEY `auto_shard_key_a` USING BTREE (`a`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY KEY(`a`)
PARTITIONS 3
SHOW CREATE TABLE t2;
Table,Create Table
t2,CREATE TABLE `t2` (
	`a` int(11) DEFAULT NULL,
	`b` int(11) DEFAULT NULL,
	`c` int(11) DEFAULT NULL,
	GLOBAL INDEX `ugsi2` (`a`)
		PARTITION BY KEY(`a`)
		PARTITIONS 3,
	KEY `auto_shard_key_a` USING BTREE (`a`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY KEY(`a`)
PARTITIONS 3
SHOW CREATE TABLE t3;
Table,Create Table
t3,CREATE TABLE `t3` (
	`a` int(11) DEFAULT NULL,
	`b` int(11) DEFAULT NULL,
	`c` int(11) DEFAULT NULL,
	UNIQUE KEY `idx3` (`a`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY KEY(`a`)
PARTITIONS 3