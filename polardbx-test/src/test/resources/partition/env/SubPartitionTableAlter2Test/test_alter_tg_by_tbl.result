## DISABLE_FAST_SQL_PARSER
CREATE TABLE `r_lc_ntp` (
`a` bigint(20) UNSIGNED NOT NULL,
`b` bigint(20) UNSIGNED NOT NULL,
`c` datetime NOT NULL,
`d` varchar(16) NOT NULL,
`e` varchar(16) NOT NULL
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE(TO_DAYS(`c`))
SUBPARTITION BY LIST COLUMNS(`a`,`b`)
(PARTITION p1 VALUES LESS THAN (737790)
(SUBPARTITION p1sp1 VALUES IN ((1000,2000)) ENGINE = InnoDB,
SUBPARTITION p1sp2 VALUES IN ((3000,4000)) ENGINE = InnoDB),
PARTITION p2 VALUES LESS THAN (738156)
(SUBPARTITION p2sp1 VALUES IN ((1000,2000)) ENGINE = InnoDB,
SUBPARTITION p2sp2 VALUES IN ((3000,4000)) ENGINE = InnoDB,
SUBPARTITION p2sp3 VALUES IN ((5000,6000)) ENGINE = InnoDB));
CREATE TABLE `r_lc_ntp2` (
`a` bigint(20) UNSIGNED NOT NULL,
`b` bigint(20) UNSIGNED NOT NULL,
`c` datetime NOT NULL,
`d` varchar(16) NOT NULL,
`e` varchar(16) NOT NULL
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE(TO_DAYS(`c`))
SUBPARTITION BY LIST COLUMNS(`a`,`b`)
(PARTITION p1 VALUES LESS THAN (737790)
(SUBPARTITION p1sp1 VALUES IN ((1000,2000)) ENGINE = InnoDB,
SUBPARTITION p1sp2 VALUES IN ((3000,4000)) ENGINE = InnoDB),
PARTITION p2 VALUES LESS THAN (738156)
(SUBPARTITION p2sp1 VALUES IN ((1000,2000)) ENGINE = InnoDB,
SUBPARTITION p2sp2 VALUES IN ((3000,4000)) ENGINE = InnoDB,
SUBPARTITION p2sp3 VALUES IN ((5000,6000)) ENGINE = InnoDB));
alter tablegroup by table r_lc_ntp merge subpartitions p2sp1,p2sp2 to p2sp4;
show create table r_lc_ntp2;
Table,Create Table
r_lc_ntp2,CREATE TABLE `r_lc_ntp2` (
	`a` bigint(20) UNSIGNED NOT NULL,
	`b` bigint(20) UNSIGNED NOT NULL,
	`c` datetime NOT NULL,
	`d` varchar(16) NOT NULL,
	`e` varchar(16) NOT NULL,
	KEY `auto_shard_key_c` USING BTREE (`c`),
	KEY `auto_shard_key_a_b` USING BTREE (`a`, `b`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE(TO_DAYS(`c`))
SUBPARTITION BY LIST COLUMNS(`a`,`b`)
(PARTITION p1 VALUES LESS THAN (737790)
 (SUBPARTITION p1sp1 VALUES IN ((1000,2000)) ENGINE = InnoDB,
  SUBPARTITION p1sp2 VALUES IN ((3000,4000)) ENGINE = InnoDB),
 PARTITION p2 VALUES LESS THAN (738156)
 (SUBPARTITION p2sp4 VALUES IN ((1000,2000),(3000,4000)) ENGINE = InnoDB,
  SUBPARTITION p2sp3 VALUES IN ((5000,6000)) ENGINE = InnoDB))
alter tablegroup by table r_lc_ntp2 rename partition p2 to p3;
show create table r_lc_ntp;
Table,Create Table
r_lc_ntp,CREATE TABLE `r_lc_ntp` (
	`a` bigint(20) UNSIGNED NOT NULL,
	`b` bigint(20) UNSIGNED NOT NULL,
	`c` datetime NOT NULL,
	`d` varchar(16) NOT NULL,
	`e` varchar(16) NOT NULL,
	KEY `auto_shard_key_c` USING BTREE (`c`),
	KEY `auto_shard_key_a_b` USING BTREE (`a`, `b`)
) ENGINE = InnoDB DEFAULT CHARSET = utf8mb4
PARTITION BY RANGE(TO_DAYS(`c`))
SUBPARTITION BY LIST COLUMNS(`a`,`b`)
(PARTITION p1 VALUES LESS THAN (737790)
 (SUBPARTITION p1sp1 VALUES IN ((1000,2000)) ENGINE = InnoDB,
  SUBPARTITION p1sp2 VALUES IN ((3000,4000)) ENGINE = InnoDB),
 PARTITION p3 VALUES LESS THAN (738156)
 (SUBPARTITION p2sp4 VALUES IN ((1000,2000),(3000,4000)) ENGINE = InnoDB,
  SUBPARTITION p2sp3 VALUES IN ((5000,6000)) ENGINE = InnoDB))